<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1621" />

  <!-- iOS: —Ä–µ–∂–∏–º "–∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–∞ —ç–∫—Ä–∞–Ω –î–æ–º–æ–π -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="–†—ã–±–∞–ª–∫–∞" />

  <title>–†—ã–±–∞–ª–∫–∞ ‚Äî –º–∏–Ω–∏-–∏–≥—Ä–∞</title>

  <!-- –ò–∫–æ–Ω–∫–∏ (–º–æ–∂–µ—à—å –æ—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ–∏ —Ç–µ–∫—É—â–∏–µ icon-*.png –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏) -->
  <link rel="apple-touch-icon" href="icon-180.png?v=29" />
  <link rel="manifest" href="manifest.json?v=31" />

  <link rel="stylesheet" href="style.css?v=53" />
</head>
<body>
  <div id="app">
    <div id="gameRoot" class="stage stage--world">
      <div id="gameLayer">
      <main id="stage">
        <div id="sceneRoot">
          <div id="bgLayer">
            <img id="bgPortraitImg" src="./bg_lake_portrait.png?v=29" alt="" draggable="false">
          </div>

          <div id="cityScene" aria-hidden="true">
            <button class="city-hitbox" data-scene="fish" data-label="–†—ã–±–Ω–∞—è –ª–∞–≤–∫–∞" aria-label="–†—ã–±–Ω–∞—è –ª–∞–≤–∫–∞"></button>
            <button class="city-hitbox" data-scene="gear" data-label="–°–Ω–∞—Å—Ç–∏" aria-label="–°–Ω–∞—Å—Ç–∏"></button>
            <button class="city-hitbox" data-scene="trophy" data-label="–¢—Ä–æ—Ñ–µ–π–Ω–∞—è" aria-label="–¢—Ä–æ—Ñ–µ–π–Ω–∞—è"></button>
            <div id="cityTooltip" role="status" aria-live="polite"></div>
          </div>

          <div id="snowLayer" aria-hidden="true"></div>

          <canvas id="game" tabindex="-1"></canvas>

          <div id="lakeScene" aria-hidden="true">
            <img id="heroLayer" class="layer hero" src="./hero.png?v=29" alt="" draggable="false">
            <img id="rodLayer" class="layer rod" src="./rod.png?v=29" alt="" draggable="false">
            <img id="bobberLayer" class="layer bobber" src="./bobber.png?v=29" alt="" draggable="false">
          </div>
        </div>
      </main>
    </div>

    <div id="uiLayer">
      <header id="topbar" class="hud topbar">
        <div class="topbarSlot topbarSlot-left">
          <button id="btnProfile" class="profileButton" aria-label="–ü—Ä–æ—Ñ–∏–ª—å">
            <span class="profileWrap" aria-hidden="true">
              <span class="profileAvatar">
                <svg viewBox="0 0 48 48" role="presentation" focusable="false">
                  <circle cx="24" cy="18" r="8"></circle>
                  <path d="M10 38c2.2-8.5 9-12 14-12s11.8 3.5 14 12"></path>
                </svg>
              </span>
              <span id="profileLevelBadge" class="profileLevelBadge">1</span>
            </span>
          </button>
        </div>

        <div class="topbarSlot topbarSlot-center">
          <div id="locationLabel" class="locationLabel">–û–∑–µ—Ä–æ</div>
          <div id="questReminder" class="questReminder hidden"></div>
        </div>

        <div class="topbarSlot topbarSlot-right">
          <button id="btnGemsHud" class="stat stat-compact stat-gems" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω –≥–µ–º–æ–≤">
            <span class="statIcon" aria-hidden="true">üíé</span>
            <span id="gems" class="value value-gems">0</span>
          </button>
          <div class="stat stat-compact">
            <span class="statIcon" aria-hidden="true">ü™ô</span>
            <span id="coins" class="value">0</span>
          </div>
        </div>
      </header>

      <div id="fightHud" class="fightHud hidden" aria-hidden="true">
        <div class="fightHudPanel">
          <div class="fightHudTitle">–ù–∞—Ç—è–∂–µ–Ω–∏–µ –ª–µ—Å–∫–∏</div>
          <div class="tensionWrap">
            <div class="tensionTrack">
              <div class="tensionZones" aria-hidden="true"></div>
              <div class="tensionTicks" aria-hidden="true"></div>
              <div class="tensionFill"></div>
            </div>
            <div class="tensionMarker" aria-hidden="true"></div>
          </div>
          <div class="fightHudRow">
            <div class="fightHudLabel">–í—ã–º–∞—Ç—ã–≤–∞–Ω–∏–µ</div>
          </div>
          <div class="reelWrap">
            <div class="reelBar">
              <div class="reelFill"></div>
              <div class="reelPercent">36%</div>
            </div>
          </div>
          <div class="bottomRow">
            <div id="breakHint" class="breakHint">–°—Ä—ã–≤: 12%</div>
            <div id="fishHintText" class="fishHintText" aria-hidden="true">
              <div id="fishHintWeight" class="fishHintLine fishHintWeight"></div>
              <div id="fishHintSpecies" class="fishHintLine fishHintSpecies"></div>
            </div>
          </div>
        </div>
      </div>

      <div id="rareBoostHud" class="rareBoostHud hidden">–†–µ–¥–∫–∏–π —É–ª–æ–≤: 0/10</div>

      <div id="cityHud" class="hidden hud">
        <button id="btnBackToLake" class="chipBtn btn--singleLine"><span class="btnText">–ù–∞ —Ä—ã–±–∞–ª–∫—É</span></button>
      </div>

      <footer id="bottombar" class="bottom-bar hud bottombar">
        <button id="btnCity" class="chipBtn btn--singleLine" aria-label="–í –≥–æ—Ä–æ–¥"><span class="btnText">–í –≥–æ—Ä–æ–¥</span></button>
        <button id="btnInventory" class="chipBtn btn--singleLine" aria-label="–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å"><span class="btnText">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</span></button>
        <button id="btnJournal" class="chipBtn btn--singleLine" aria-label="–ñ—É—Ä–Ω–∞–ª"><span class="btnText">–ñ—É—Ä–Ω–∞–ª</span></button>
        <button id="btnHero" class="chipBtn btn--singleLine" aria-label="–ì–µ—Ä–æ–π"><span class="btnText">–ì–µ—Ä–æ–π</span></button>
        <button id="btnStar" class="chipBtn iconBtn" aria-label="–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ">
          <span class="icon" aria-hidden="true">‚≠ê</span>
          <span class="iconMeta" aria-hidden="true">soon</span>
        </button>
        <button id="btnMute" class="chipBtn iconBtn" aria-label="–ó–≤—É–∫ –≤–∫–ª—é—á–µ–Ω">
          <span class="icon" aria-hidden="true">üîä</span>
        </button>
      </footer>
    </div>

    <div id="modalLayer">
      <div id="overlay" class="hidden modal modalOverlay">
        <div class="card">
          <div class="h1">–†—ã–±–∞–ª–∫–∞</div>
          <div class="p" id="ovText">–¢–∞–ø–Ω–∏, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å.</div>

          <div class="row">
            <button id="btnPlay"><span class="btnText">–ò–≥—Ä–∞—Ç—å</span></button>
            <button id="btnReset" class="secondary"><span class="btnText">–°–±—Ä–æ—Å</span></button>
          </div>

          <div class="small">
            –°–æ–≤–µ—Ç: –æ—Ç–∫—Ä–æ–π –≤ Safari –∏ –¥–æ–±–∞–≤—å –Ω–∞ —ç–∫—Ä–∞–Ω ¬´–î–æ–º–æ–π¬ª ‚Äî –±—É–¥–µ—Ç –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
          </div>
        </div>
      </div>

      <div id="invOverlay" class="hidden modal modalOverlay">
        <div class="invCard modalCard">
          <div class="invHeader modalHeader">
            <div class="invTitle modalTitle modalHeaderTitle">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</div>
            <button id="btnInvClose" class="modalClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
          </div>
          <div class="modalBody">
            <div class="invControls">
              <label for="invSort">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</label>
              <select id="invSort">
                <option value="WEIGHT_DESC">–ü–æ –≤–µ—Å—É (—É–±—ã–≤.)</option>
                <option value="WEIGHT_ASC">–ü–æ –≤–µ—Å—É (–≤–æ–∑—Ä.)</option>
                <option value="NAME_ASC">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–ê-–Ø)</option>
                <option value="NAME_DESC">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–Ø-–ê)</option>
              </select>
              <button id="btnInvFishJournal" class="chipBtn secondary btn--singleLine" aria-label="–ñ—É—Ä–Ω–∞–ª —Ä—ã–±">
                <span class="btnText">–ñ—É—Ä–Ω–∞–ª —Ä—ã–±</span>
              </button>
            </div>

            <div id="invItemsView">
              <div id="invEmpty" class="invEmpty hidden">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç. –ü–æ–π–º–∞–π —Ä—ã–±—É!</div>
              <div id="invList" class="invList scrollable"></div>
            </div>

            <div id="invFishJournalView" class="fishJournalView hidden">
              <ol id="fishJournalList" class="fishJournalList"></ol>
            </div>

            <div id="invFishJournalDetailView" class="fishJournalView fishJournalDetailView hidden">
              <button id="btnFishJournalBack" class="chipBtn fishJournalBackBtn" aria-label="–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É">
                <span class="btnText">‚Üê –ù–∞–∑–∞–¥</span>
              </button>
              <div class="fishJournalDetailCard">
                <div class="fishJournalDetailHead">
                  <div id="fishJournalDetailName" class="fishJournalDetailName">–†—ã–±–∞</div>
                  <span id="fishJournalDetailRarity" class="badge badge-common">–û–±—ã—á–Ω–∞—è</span>
                </div>
                <div id="fishJournalDetailImageSlot" class="fishJournalDetailImageSlot">
                  <img id="fishJournalDetailImage" class="fishJournalDetailImage" alt="">
                </div>
                <div class="fishJournalDetailMeta">
                  <div><strong>–¶–µ–Ω–∞ –∑–∞ –∫–≥:</strong> <span id="fishJournalDetailPrice">0 –º–æ–Ω–µ—Ç</span></div>
                  <div><strong>–î–∏–∞–ø–∞–∑–æ–Ω –≤–µ—Å–∞:</strong> <span id="fishJournalDetailWeight">0.00‚Äì0.00 –∫–≥</span></div>
                  <div><strong>–®–∞–Ω—Å –ø–æ–∏–º–∫–∏:</strong> <span id="fishJournalDetailChance">0%</span></div>
                  <div><strong>–ü–µ—Ä–≤–∞—è –ø–æ–∏–º–∫–∞:</strong> <span id="fishJournalDetailFirstCatch">‚Äî</span></div>
                  <div><strong>–ü–æ–π–º–∞–Ω–æ –≤—Å–µ–≥–æ:</strong> <span id="fishJournalDetailCaughtTotal">0</span></div>
                  <div><strong>–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É–¥–æ—á–∫–∞:</strong> <span id="fishJournalDetailRod">Rod_1</span></div>
                </div>
                <div id="fishJournalDetailStory" class="fishJournalDetailStory"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="trashOverlay" class="hidden modal modalOverlay">
        <div class="trashCard modalCard">
          <div class="trashHeader modalHeader">
            <div class="trashTitle modalTitle modalHeaderTitle">–ñ—É—Ä–Ω–∞–ª –Ω–∞—Ö–æ–¥–æ–∫</div>
            <button id="btnTrashClose" class="modalClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
          </div>
          <div class="modalBody">
            <div id="trashRewardStatus" class="trashRewardStatus">
              <div class="trashRewardLine trashRewardLine--progress" id="trashRewardLineProgress">
                <span class="trashRewardLabel">–ù–∞–π–¥–µ–Ω–æ:</span>
                <span id="trashFoundCount" class="trashRewardCount">0</span>
                <span id="trashFoundTotal" class="trashRewardTotal">/10.</span>
                <span class="trashRewardLabel">–ù–∞–≥—Ä–∞–¥–∞:</span>
                <span class="trashRewardRod">
                  <img class="trashRewardIcon" src="./rod.png?v=29" alt="" aria-hidden="true">
                  <span class="trashRewardRodName">–£–¥–æ—á–∫–∞ ¬´–°–æ–±–∏—Ä–∞—Ç–µ–ª—å¬ª.</span>
                </span>
              </div>
              <div class="trashRewardLine trashRewardLine--complete" id="trashRewardLineComplete">
                <span class="trashRewardLabel">–ù–∞–≥—Ä–∞–¥–∞:</span>
                <span class="trashRewardRod">
                  <img class="trashRewardIcon" src="./rod.png?v=28" alt="" aria-hidden="true">
                  <span class="trashRewardRodName">–£–¥–æ—á–∫–∞ ¬´–°–æ–±–∏—Ä–∞—Ç–µ–ª—å¬ª –ø–æ–ª—É—á–µ–Ω–∞.</span>
                </span>
              </div>
              <div class="trashProgress" aria-hidden="true">
                <div class="trashProgressFill" id="trashProgressFill"></div>
              </div>
            </div>
            <div id="trashGrid" class="trashGrid findingsGrid"></div>
            <div class="trashControls">
              <button id="btnTrashFill" class="chipBtn secondary hidden btn--twoLines"><span class="btnText">TEST: –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∂—É—Ä–Ω–∞–ª</span></button>
              <button id="btnResetCharges" class="chipBtn secondary hidden btn--twoLines"><span class="btnText">TEST: —Å–±—Ä–æ—Å–∏—Ç—å –∑–∞—Ä—è–¥—ã</span></button>
            </div>
          </div>
        </div>
      </div>

      <div id="catchOverlay" class="hidden modal modalOverlay">
        <div class="catchCard">
          <div class="catchHeader">
            <div id="catchTitle" class="catchTitle">–ü–æ–π–º–∞–ª —Ä—ã–±—É!</div>
            <span id="catchRarity" class="badge badge-common">–æ–±—ã—á–Ω–∞—è</span>
          </div>
          <div id="catchName" class="catchName">–†—ã–±–∞</div>
          <div id="catchImageSlot" class="catchImageSlot">
            <img id="catchImage" class="catchImage" alt="">
          </div>
          <div class="catchMeta">
            <div><strong>–í–µ—Å:</strong> <span id="catchWeight">0.00 –∫–≥</span></div>
            <div class="catchStory" id="catchStory"></div>
          </div>
          <div class="catchPrices">
            <div class="catchPriceRow catchPriceRow--single">
              <span class="priceLabel">–¶–µ–Ω–∞:</span>
              <span class="catchPriceValueWrap"><span id="catchFullPrice" class="priceValue">0</span><span class="coinIcon" aria-hidden="true">ü™ô</span></span>
            </div>
          </div>
          <div id="catchXpBlock" class="catchXpBlock">
            <div id="catchXpGain" class="catchXpGain hidden">+0 XP</div>
            <div id="catchXpBar" class="catchXpBar" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å –æ–ø—ã—Ç–∞ –∑–∞ —É–ª–æ–≤">
              <div id="catchXpBarBase" class="catchXpBarBase"></div>
              <div id="catchXpBarDelta" class="catchXpBarDelta"></div>
              <div id="catchXpBarHead" class="catchXpBarHead"></div>
            </div>
            <div id="catchXpLabel" class="catchXpLabel">XP 0/0</div>
          </div>
          <div class="row">
            <button id="btnCatchKeep" class="secondary btn--twoLines"><span class="btnText">–í –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</span></button>
          </div>
        </div>
      </div>

      <div id="findingOverlay" class="hidden modal modalOverlay">
        <div class="findingCard">
          <div class="findingHeader">
            <div id="findingTitle" class="findingTitle">–í—ã—É–¥–∏–ª —á—Ç–æ-—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ</div>
          </div>
          <div id="findingName" class="findingName">–ù–∞—Ö–æ–¥–∫–∞</div>
          <div id="findingImageSlot" class="findingImageSlot">
            <img id="findingImage" class="findingImage" alt="">
          </div>
          <div id="findingStory" class="findingStory"></div>
          <div class="row">
            <button id="btnFindingContinue" class="secondary btn--twoLines"><span class="btnText">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</span></button>
            <button id="btnFindingJournal" class="btn--twoLines"><span class="btnText">–ñ—É—Ä–Ω–∞–ª –Ω–∞—Ö–æ–¥–æ–∫</span></button>
          </div>
        </div>
      </div>

      <div id="profileSetupOverlay" class="hidden modal modalOverlay modal-blocking" aria-hidden="true">
        <div class="profileCard profileCard--setup modalCard">
          <div class="profileHeader modalHeader">
            <div class="profileTitle modalTitle modalHeaderTitle">–í—ã–±–æ—Ä –Ω–∏–∫–∞</div>
          </div>
          <div class="profileBody modalBody">
            <div class="profileSetupSuggested">
              <div class="profileSetupLabel">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π –Ω–∏–∫</div>
              <div id="profileSetupSuggested" class="profileSetupName">user1</div>
            </div>
            <div class="row">
              <button id="btnProfileSetupAccept" class="btn--twoLines"><span class="btnText">–ü—Ä–∏–Ω—è—Ç—å –Ω–∏–∫</span></button>
              <button id="btnProfileSetupCustom" class="secondary btn--twoLines"><span class="btnText">–í–≤–µ—Å—Ç–∏ —Å–≤–æ–π</span></button>
            </div>
            <div id="profileSetupCustomPanel" class="profileSetupCustom hidden">
              <label class="formLabel" for="profileSetupInput">–°–≤–æ–π –Ω–∏–∫</label>
              <input id="profileSetupInput" class="textInput" type="text" maxlength="12" autocomplete="nickname" />
              <div id="profileSetupError" class="formHint"></div>
              <div class="row">
                <button id="btnProfileSetupSave"><span class="btnText">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span></button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="profileOverlay" class="hidden modal modalOverlay" aria-hidden="true">
        <div class="profileCard modalCard">
          <div id="profileScreenMain" class="profileScreen">
            <div class="profileHeader modalHeader">
              <div class="profileHeaderInfo">
                <div class="profileTitle modalTitle modalHeaderTitle">–ü—Ä–æ—Ñ–∏–ª—å</div>
                <div class="profileHeaderNickRow">
                  <div id="profileName" class="profileName">user1</div>
                  <button id="btnProfileRename" class="iconButton" aria-label="–°–º–µ–Ω–∏—Ç—å –Ω–∏–∫">
                    <span aria-hidden="true">‚úé</span>
                  </button>
                </div>
              </div>
              <button id="btnProfileClose" class="modalClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="profileBody modalBody">
              <section class="profileSection">
                <div class="profileQuickActions">
                  <button id="btnProfileLeaderboardsOpen" class="chipBtn secondary btn--twoLines"><span class="btnText">–†–µ–∫–æ—Ä–¥—ã</span></button>
                </div>
              </section>

              <section class="profileSection soundSettings">
                <div class="sectionTitle">–ó–≤—É–∫</div>
                <div class="soundSettingRow">
                  <span>–û—Ç–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫</span>
                  <button id="btnSoundToggle" class="chipBtn btn--singleLine" type="button" aria-pressed="false">
                    <span class="btnText">–í–∫–ª—é—á–µ–Ω</span>
                  </button>
                </div>
                <label class="soundSettingRow soundSettingSlider">
                  <span>–ì—Ä–æ–º–∫–æ—Å—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–æ–≤</span>
                  <input id="sfxVolume" type="range" min="0" max="100" step="1" value="18" />
                  <span id="sfxVolumeValue" class="soundSettingValue">18%</span>
                </label>
              </section>

            </div>
          </div>

        </div>
      </div>

      <div id="heroOverlay" class="hidden modal modalOverlay" aria-hidden="true">
        <div class="profileCard modalCard">
          <div id="heroScreenMain" class="profileScreen">
            <div class="profileHeader modalHeader">
              <div class="profileHeaderInfo">
                <div class="profileTitle modalTitle modalHeaderTitle">–ì–µ—Ä–æ–π</div>
              </div>
              <button id="btnHeroClose" class="modalClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="profileBody modalBody">
              <section class="profileSection">
                <div class="sectionTitle">–£—Ä–æ–≤–µ–Ω—å</div>
                <div id="profileXpRing" class="xpRing" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å –æ–ø—ã—Ç–∞"></div>
              </section>

              <section class="profileSection">
                <div class="sectionTitle">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
                <div class="profileStats">
                  <div class="statRow"><span>–í—Ä–µ–º—è –≤ –∏–≥—Ä–µ</span><span id="statPlayTime">00:00</span></div>
                  <div class="statRow"><span>–ü–æ–π–º–∞–Ω–æ —Ä—ã–±</span><span id="statFishCaught">0</span></div>
                  <div class="statRow"><span>–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –∑–æ–ª–æ—Ç–∞</span><span id="statGoldEarned">0</span></div>
                  <div class="statRow"><span>–°–∞–º–∞—è —Ä–µ–¥–∫–∞—è</span><span id="statBestRarity">‚Äî</span></div>
                  <div class="statRow"><span>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å</span><span id="statMaxWeight">0 –∫–≥</span></div>
                </div>
              </section>

              <section class="profileSection">
                <div class="sectionTitle">–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ</div>
                <div class="profileGearItem">
                  <div>
                    <div class="profileGearLabel">–£–¥–æ—á–∫–∞</div>
                    <div id="profileRodName" class="profileGearValue">‚Äî</div>
                  </div>
                  <button class="chipBtn profileGearToggle btn--singleLine" data-gear="rod" type="button"><span class="btnText">–ò–∑–º–µ–Ω–∏—Ç—å</span></button>
                </div>
                <div class="profileGearItem">
                  <div>
                    <div class="profileGearLabel">–õ–µ—Å–∫–∞</div>
                    <div id="profileLineName" class="profileGearValue">‚Äî</div>
                  </div>
                  <button class="chipBtn profileGearToggle btn--singleLine" data-gear="line" type="button"><span class="btnText">–ò–∑–º–µ–Ω–∏—Ç—å</span></button>
                </div>
                <div class="profileGearItem">
                  <div>
                    <div class="profileGearLabel">–ù–∞–∂–∏–≤–∫–∞</div>
                    <div id="profileBaitName" class="profileGearValue">‚Äî</div>
                  </div>
                  <button class="chipBtn profileGearToggle btn--singleLine" data-gear="bait" type="button"><span class="btnText">–ò–∑–º–µ–Ω–∏—Ç—å</span></button>
                </div>
              </section>
            </div>
          </div>

          <div id="heroScreenGear" class="profileScreen hidden">
            <div class="profileHeader modalHeader">
              <div class="modalTitleGroup">
                <div id="profileGearTitle" class="profileTitle modalTitle modalHeaderTitle">–í—ã–±–æ—Ä</div>
                <button id="btnHeroGearBack" class="chipBtn btn--singleLine"><span class="btnText">–ù–∞–∑–∞–¥</span></button>
              </div>
              <button id="btnHeroGearClose" class="modalClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="profileBody modalBody">
              <div id="profileGearPickerList" class="profileGearPickerList"></div>
            </div>
          </div>
        </div>
      </div>

      <div id="renameOverlay" class="hidden modal modalOverlay" aria-hidden="true">
        <div class="renameCard modalCard">
          <div class="renameHeader modalHeader">
            <div class="renameTitle modalTitle modalHeaderTitle">–°–º–µ–Ω–∞ –Ω–∏–∫–∞</div>
            <button id="btnRenameClose" class="modalClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
          </div>
          <div class="renameBody modalBody">
            <div id="renameScreenMain" class="renameScreen">
              <div id="renameFreeHint" class="renameHint">–ü–µ—Ä–≤—ã–π —Ä–∞–∑ ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω–æ.</div>
              <label class="formLabel" for="renameInput">–ù–æ–≤—ã–π –Ω–∏–∫</label>
              <input id="renameInput" class="textInput" type="text" maxlength="12" autocomplete="nickname" />
              <div id="renameError" class="formHint"></div>
              <div class="row">
                <button id="btnRenameSave"><span class="btnText">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span></button>
              </div>
            </div>
            <div id="renameScreenConfirm" class="renameScreen hidden">
              <div id="renameConfirmText" class="profileConfirmText"></div>
              <div class="profileConfirmActions">
                <button id="btnRenameConfirmBack" class="chipBtn secondary btn--singleLine"><span class="btnText">–û—Ç–º–µ–Ω–∞</span></button>
                <button id="btnRenameConfirmSave" class="chipBtn btn--singleLine"><span class="btnText">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</span></button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="travelOverlay" class="hidden modal modalOverlay stage stage--travel" aria-hidden="true">
        <div class="travelWrap modalCard">
          <div class="travelHeader modalHeader">
            <div id="travelMessage" class="travelMessage travelTitle" aria-live="polite"></div>
            <div id="travelTimer" class="travelTimer">00:18</div>
          </div>
          <div class="modalBody">
            <div class="travelCard" role="img" aria-label="–ú–∞—Ä—à—Ä—É—Ç –æ—Ç –æ–∑–µ—Ä–∞ –¥–æ –≥–æ—Ä–æ–¥–∞">
              <svg id="travelMap" viewBox="0 0 320 150" aria-hidden="true">
                <path id="travelPathBase" d="M 30 110 Q 160 20 290 110" />
                <path id="travelPathProgress" d="M 30 110 Q 160 20 290 110" />
                <circle id="travelMarker" cx="30" cy="110" r="6" />
              </svg>
              <div class="travelLabels">
                <span>–û–∑–µ—Ä–æ</span>
                <span>–ì–æ—Ä–æ–¥</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="shopOverlay" class="hidden modal modalOverlay stage stage--shop">
        <div class="shopCard modalCard">
          <div class="shopHeader modalHeader">
            <div id="shopTitle" class="shopTitle modalTitle modalHeaderTitle">–ú–∞–≥–∞–∑–∏–Ω</div>
            <button id="btnShopClose" class="modalClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
          </div>

          <div id="shopContent" class="shopContent modalBody">
            <div id="shopStats" class="shopStats"></div>

            <div id="fishShopSection" class="shopSection hidden">
              <div class="shopSectionHeader">
                <div class="shopSectionTitle">–ü—Ä–æ–¥–∞–∂–∞ —Ä—ã–±—ã</div>
                <button id="btnSellAll" class="invBtn primary btn--twoLines"><span class="btnText">–ü—Ä–æ–¥–∞—Ç—å –≤—Å—ë</span></button>
              </div>
              <div id="shopInvEmpty" class="invEmpty hidden">–ù–µ—Ç —Ä—ã–±—ã –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏.</div>
              <div id="shopInvList" class="shopList scrollable"></div>
            </div>

            <div id="trophySection" class="shopSection hidden">
              <div class="shopSectionHeader">
                <div class="shopSectionTitle">–¢—Ä–æ—Ñ–µ–π–Ω–∞—è</div>
              </div>
              <div id="trophyHub" class="trophyHub">
                <button id="btnTrophyQuests" class="trophyHubBtn btn--singleLine"><span class="btnText">–ó–∞–¥–∞–Ω–∏—è</span></button>
                <button id="btnTrophyRecords" class="trophyHubBtn secondary btn--singleLine"><span class="btnText">–†–µ–∫–æ—Ä–¥—ã</span></button>
              </div>
              <div id="trophyQuestPanel" class="trophyPanel hidden">
                <div class="trophyQuestHeader">
                  <div class="shopSubTitle">–ó–∞–¥–∞–Ω–∏—è</div>
                  <button id="btnTrophyBack" class="chipBtn secondary btn--singleLine"><span class="btnText">–ù–∞–∑–∞–¥</span></button>
                </div>
                <div id="trophyQuestSection">
                  <div class="shopSubTitle">–í—ã–±–µ—Ä–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å</div>
                  <div class="questDifficulty">
                    <button class="difficultyBtn btn--singleLine" data-difficulty="easy"><span class="btnText">–õ—ë–≥–∫–æ–µ</span></button>
                    <button class="difficultyBtn btn--singleLine" data-difficulty="medium"><span class="btnText">–°—Ä–µ–¥–Ω–µ–µ</span></button>
                    <button class="difficultyBtn btn--singleLine" data-difficulty="hard"><span class="btnText">–°–ª–æ–∂–Ω–æ–µ</span></button>
                  </div>
                  <div class="questCard">
                    <div class="questCardTitle">–£—Å–ª–æ–≤–∏—è</div>
                    <div class="questRow"><span>–ü–æ—Ä–æ–¥–∞</span><span id="questPreviewSpecies">‚Äî</span></div>
                    <div class="questRow"><span>–í–µ—Å</span><span id="questPreviewWeight">‚Äî</span></div>
                    <div class="questRow"><span>–ù–∞–≥—Ä–∞–¥–∞</span><span id="questPreviewReward">‚Äî</span></div>
                    <div class="questActions">
                      <button id="btnQuestAccept" class="invBtn btn--singleLine"><span class="btnText">–í–∑—è—Ç—å</span></button>
                    </div>
                  </div>
                  <div class="questRefresh">
                    <button id="btnQuestRefresh" class="invBtn secondary btn--twoLines"><span class="btnText">–û–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏—è</span></button>
                    <div id="questRefreshStatus" class="questRefreshStatus" aria-live="polite"></div>
                  </div>
                </div>

                <div id="trophyActiveSection" class="hidden">
                  <div class="shopSubTitle">–ê–∫—Ç–∏–≤–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ</div>
                  <div class="questCard">
                    <div class="questRow"><span>–ü–æ—Ä–æ–¥–∞</span><span id="activeQuestSpecies">‚Äî</span></div>
                    <div class="questRow"><span>–í–µ—Å</span><span id="activeQuestWeight">‚Äî</span></div>
                    <div class="questRow"><span>–ù–∞–≥—Ä–∞–¥–∞</span><span id="activeQuestReward">‚Äî</span></div>
                    <div class="questStatus" id="activeQuestStatus">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</div>
                    <div class="questActions">
                      <button id="btnQuestClaim" class="invBtn btn--twoLines"><span class="btnText">–ó–∞–±—Ä–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—É</span></button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div id="gearShopSection" class="shopSection hidden">
              <div class="shopSectionTitle">–°–Ω–∞—Å—Ç–∏</div>
              <div class="gearTabs" role="tablist" aria-label="–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–Ω–∞—Å—Ç–µ–π">
                <button class="gearTabBtn is-active btn--singleLine" data-gear-tab="bait" role="tab" aria-selected="true"><span class="btnText">–ù–∞–∂–∏–≤–∫–∏</span></button>
                <button class="gearTabBtn btn--singleLine" data-gear-tab="rod" role="tab" aria-selected="false"><span class="btnText">–£–¥–æ—á–∫–∏</span></button>
                <button class="gearTabBtn btn--singleLine" data-gear-tab="line" role="tab" aria-selected="false"><span class="btnText">–õ–µ—Å–∫–∏</span></button>
                <button class="gearTabBtn btn--singleLine" data-gear-tab="books" role="tab" aria-selected="false"><span class="btnText">–ö–Ω–∏–≥–∏</span></button>
              </div>
              <div class="gearTabPanels">
                <div class="gearTabPanel is-active" data-gear-panel="bait" role="tabpanel">
                  <div id="baitList" class="shopList scrollable"></div>
                </div>
                <div class="gearTabPanel" data-gear-panel="rod" role="tabpanel">
                  <div id="rodList" class="shopList scrollable"></div>
                </div>
                <div class="gearTabPanel" data-gear-panel="line" role="tabpanel">
                  <div id="lineList" class="shopList scrollable"></div>
                </div>
                <div class="gearTabPanel" data-gear-panel="books" role="tabpanel">
                  <div id="booksList" class="shopList scrollable"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="gemsShopOverlay" class="hidden modal modalOverlay" aria-hidden="true">
        <div class="gemsShopCard modalCard">
          <div class="modalHeader">
            <div class="modalTitle modalHeaderTitle">–ú–∞–≥–∞–∑–∏–Ω</div>
            <button id="btnGemsShopClose" class="modalClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
          </div>
          <div class="modalBody">
            <div class="shopTabs" role="tablist" aria-label="–ú–∞–≥–∞–∑–∏–Ω –≤–∞–ª—é—Ç">
              <button class="shopTabBtn is-active btn--singleLine" data-shop-tab="gems" role="tab" aria-selected="true"><span class="btnText">–ì–µ–º—ã</span></button>
              <button class="shopTabBtn btn--singleLine" data-shop-tab="coins" role="tab" aria-selected="false"><span class="btnText">–ú–æ–Ω–µ—Ç—ã</span></button>
              <button class="shopTabBtn btn--singleLine" data-shop-tab="exchange" role="tab" aria-selected="false"><span class="btnText">–û–±–º–µ–Ω</span></button>
              <span id="shopTabIndicator" class="shopTabIndicator" aria-hidden="true"></span>
            </div>
            <div id="gemsTabPanel" class="shopTabPanel is-active" role="tabpanel">
              <div id="gemsPackList" class="gemsPackList"></div>
            </div>
            <div id="coinsTabPanel" class="shopTabPanel" role="tabpanel" aria-hidden="true">
              <div id="coinsPackList" class="gemsPackList"></div>
            </div>
            <div id="exchangeTabPanel" class="shopTabPanel" role="tabpanel" aria-hidden="true">
              <div class="exchangePanel">
                <div id="exchangeRateText" class="exchangeRateText">–ö—É—Ä—Å: 1 üíé = 500 ü™ô</div>
                <label class="formLabel" for="exchangeInput">–°–∫–æ–ª—å–∫–æ üíé –æ–±–º–µ–Ω—è—Ç—å</label>
                <input id="exchangeInput" class="textInput" type="number" min="1" step="1" inputmode="numeric" />
                <div id="exchangeResult" class="exchangeResult">–ü–æ–ª—É—á–∏—à—å: 0 ü™ô</div>
                <button id="btnExchangeSubmit" class="chipBtn btn--singleLine" disabled><span class="btnText">–û–±–º–µ–Ω—è—Ç—å</span></button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="leaderboardOverlay" class="hidden modal modalOverlay" aria-hidden="true">
        <div class="leaderboardCard modalCard">
          <div class="leaderboardHeader modalHeader">
            <div class="leaderboardTitle modalTitle modalHeaderTitle">–¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤</div>
            <button id="btnLeaderboardClose" class="modalClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
          </div>
          <div class="leaderboardBody modalBody">
            <div class="leaderboardTabs" role="tablist" aria-label="–¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤">
              <button class="leaderboardTabBtn is-active btn--singleLine" data-leaderboard-tab="max_weight" role="tab" aria-selected="true"><span class="btnText">–í–µ—Å</span></button>
              <button class="leaderboardTabBtn btn--singleLine" data-leaderboard-tab="best_rarity" role="tab" aria-selected="false"><span class="btnText">–†–µ–¥–∫–æ—Å—Ç—å</span></button>
              <button class="leaderboardTabBtn btn--singleLine" data-leaderboard-tab="gold_earned" role="tab" aria-selected="false"><span class="btnText">–ó–æ–ª–æ—Ç–æ</span></button>
              <button class="leaderboardTabBtn btn--singleLine" data-leaderboard-tab="level" role="tab" aria-selected="false"><span class="btnText">–£—Ä–æ–≤–µ–Ω—å</span></button>
            </div>
            <div class="leaderboardPanel">
              <div id="leaderboardYourRecord" class="leaderboardYourRecord">–¢–≤–æ–π —Ä–µ–∫–æ—Ä–¥: ‚Äî</div>
              <div class="leaderboardSectionLabel">–õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–æ–ø-10</div>
              <div id="leaderboardLocalList" class="leaderboardList scrollable"></div>
              <div class="leaderboardWorldStub">–ú–∏—Ä–æ–≤—ã–µ: —Å–∫–æ—Ä–æ (–ø–æ—Å–ª–µ —Ä–µ–ª–∏–∑–∞ –≤ –Ø–Ω–¥–µ–∫—Å –ò–≥—Ä—ã).</div>
            </div>
          </div>
        </div>
      </div>

      <div id="sceneFade" class="sceneFade hidden"></div>
      <div id="gemsDevPanel" class="gemsDevPanel hidden">
        <button id="btnDevAddGems" class="chipBtn secondary btn--singleLine"><span class="btnText">DEV +100 üíé</span></button>
        <button id="btnDevResetGems" class="chipBtn secondary btn--singleLine"><span class="btnText">DEV set 0 üíé</span></button>
      </div>
      <div id="toast" class="toast hidden"></div>
      <div id="xpToast" class="xpToast hidden"></div>
      <div id="hintToast" class="hintToast hidden" aria-live="polite"></div>

      <div id="booksIntroOverlay" class="hidden modal modalOverlay" aria-hidden="true">
        <div class="modalCard booksIntroCard">
          <div class="modalHeader">
            <div class="modalTitle modalHeaderTitle">–ù–æ–≤–æ–µ —á—É—Ç—å—ë</div>
          </div>
          <div class="modalBody">
            <p class="booksIntroText">–¢–µ–ø–µ—Ä—å –≤–æ –≤—Ä–µ–º—è –≤—ã–≤–∞–∂–∏–≤–∞–Ω–∏—è —Ç—ã –Ω–∞—á–Ω—ë—à—å –ª—É—á—à–µ —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –≤–µ—Å –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ä—ã–±—ã.</p>
            <button id="btnBooksIntroOk" class="chipBtn btn--singleLine"><span class="btnText">–û–∫</span></button>
          </div>
        </div>
      </div>

      <div id="rotateOverlay" class="rotateOverlay hidden" role="status" aria-live="polite">
        <div class="rotateCard">
          <div class="rotateIcon" aria-hidden="true"></div>
          <div class="rotateTitle">–ü–æ–≤–µ—Ä–Ω–∏ —Ç–µ–ª–µ—Ñ–æ–Ω –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ</div>
          <div class="rotateHint">–ò–≥—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø–æ—Ä—Ç—Ä–µ—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ</div>
        </div>
      </div>

      <div id="tutorialOverlay" class="tutorialOverlay hidden stage stage--tutorial" aria-hidden="true">
        <div id="tutorialSpotlight" class="tutorialSpotlight"></div>
        <div class="tutorialHeader">
          <div class="tutorialHeaderBadge">üé£ –û–±—É—á–µ–Ω–∏–µ –Ω–∞—á–∞–ª–æ—Å—å</div>
        </div>
        <div class="tutorialCardWrap">
          <div class="tutorialCard">
            <h3 id="tutorialTitle">–û–±—É—á–µ–Ω–∏–µ</h3>
            <p id="tutorialText"></p>
            <button id="tutorialNextBtn" class="chipBtn btn--singleLine"><span class="btnText">–î–∞–ª–µ–µ</span></button>
          </div>
        </div>
        <div id="tutorialSwipeHint" class="tutorialSwipeHint hidden" aria-hidden="true">
          <div class="tutorialSwipeLine"></div>
          <div class="tutorialSwipeArrow">‚Üë</div>
          <div class="tutorialSwipeHand">üñêÔ∏è</div>
        </div>
      </div>
      </div>
    </div>
  </div>

  <!-- cache-bust: audio manager + main.js v79 (cache refresh) -->
  <script src="audio/AudioManager.js?v=2"></script>
  <script src="stage/StageBase.js?v=1"></script>
  <script src="stage/StageManager.js?v=1"></script>
  <script src="config/gemsShop.js?v=2"></script>
  <script src="config/coinShop.js?v=1"></script>
  <script src="config/exchange.js?v=1"></script>
  <script src="main.js?v=81"></script>
</body>
</html>
