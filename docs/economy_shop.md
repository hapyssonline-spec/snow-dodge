# Экономика и магазин

## Пакеты гемов (макс бонус 20%)
Источник: `config/gemsShop.js`.

- pack_30: 30 [gem] (+0%) — 49 yan
- pack_80: 80 [gem] (+10% => 88) — 99 yan
- pack_170: 170 [gem] (+15% => 195) — 199 yan
- pack_360: 360 [gem] (+20% => 432) — 399 yan
- pack_800: 800 [gem] (+20% => 960) — 799 yan

## Пакеты монет за YAN
Источник: `config/coinShop.js`.

- coin_13k: 13 000 [coin] (+0%) — 49 yan
- coin_35k: 38 500 [coin] (+10%) — 99 yan
- coin_74k: 85 100 [coin] (+15%) — 199 yan
- coin_154k: 184 800 [coin] (+20%) — 399 yan
- coin_350k: 420 000 [coin] (+20%) — 799 yan

Прямая покупка монет немного хуже сценария «купить гемы и обменять». Это сохраняет гемы как основную донат-валюту.

## Обмен
Источник: `config/exchange.js`.

- Курс фиксирован: `1 [gem] = 500 [coin]`
- Только в одну сторону: Gems -> Coins
- Без бонусов и без лимитов
- Обратного обмена Coins -> Gems нет

## Где что находится

- Конфиги: `config/gemsShop.js`, `config/coinShop.js`, `config/exchange.js`
- Провайдеры покупок: `main.js`
  - `MockPurchaseProvider` / `YandexPurchaseProvider`
  - `MockCoinPurchaseProvider` / `YandexCoinPurchaseProvider`
- Сервисы: `main.js`
  - `GemsService`
  - `CoinsService`
  - `ExchangeService`
- Визуальные эффекты магазина: `main.js`
  - `ShopVfxController`

## Как тестировать (mock success)

1. Открыть магазин через кнопку [gem] в HUD.
2. На вкладке «Гемы» купить любой пакет — баланс гемов растёт, есть toast и анимация полёта.
3. На вкладке «Монеты» купить пакет — баланс монет растёт, есть toast и анимация.
4. На вкладке «Обмен» ввести целое число гемов и нажать «Обменять».
5. Проверить:
   - списание гемов,
   - начисление `X*500` монет,
   - toast «Обмен выполнен».
6. Проверить отрицательный кейс: ввести больше гемов, чем баланс — кнопка блокируется/показывается «Недостаточно гемов».
